rabbitmq:
  build: ./RabbitMQ
  expose:
    - "5671"
redis:
  build: ./Redis
  links:
    - rabbitmq
  expose:
    - "6379"
elasticsearch:
  build: ./Elasticsearch
  links:
    - rabbitmq
  expose:
    - "9200"
  ports:
    - "9200:9200"
graphite:
  build: ./Graphite
  links:
    - rabbitmq
  expose:
    - "2003"
    - "80"
  ports:
    - "8880:80"
grafana:
  build: ./Grafana
  environment:
    - GRAPHITE_HOST=localhost
    - GRAPHITE_PORT=8880
    - ELASTICSEARCH_HOST=localhost
    - ELASTICSEARCH_PORT=9200
  links:
    - rabbitmq
    - graphite
    - elasticsearch
  ports:
    - "8888:80"
sensu:
  build: ./Sensu
  environment:
    - SENSU_METRICS=true
  volumes:
    - /var/log/sensu:/var/log/sensu
    - /etc/sensu/conf.d:/etc/sensu/conf.d
  links:
    - redis
    - rabbitmq
    - graphite
  ports:
    - "3000:3000"
